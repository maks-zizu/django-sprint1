from django.shortcuts import render
from django.http import Http404

posts = [
    {
        'id': 0,
        'location': '–û—Å—Ç—Ä–æ–≤ –æ—Ç—á–∞—è–Ω—å—è',
        'date': '30 —Å–µ–Ω—Ç—è–±—Ä—è 1659 –≥–æ–¥–∞',
        'category': 'travel',
        'text': '''–ù–∞—à –∫–æ—Ä–∞–±–ª—å, –∑–∞—Å—Ç–∏–≥–Ω—É—Ç—ã–π –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –º–æ—Ä–µ
                —Å—Ç—Ä–∞—à–Ω—ã–º —à—Ç–æ—Ä–º–æ–º, –ø–æ—Ç–µ—Ä–ø–µ–ª –∫—Ä—É—à–µ–Ω–∏–µ.
                –í–µ—Å—å —ç–∫–∏–ø–∞–∂, –∫—Ä–æ–º–µ –º–µ–Ω—è, —É—Ç–æ–Ω—É–ª; —è –∂–µ,
                –Ω–µ—Å—á–∞—Å—Ç–Ω—ã–π –†–æ–±–∏–Ω–∑–æ–Ω –ö—Ä—É–∑–æ, –±—ã–ª –≤—ã–±—Ä–æ—à–µ–Ω
                –ø–æ–ª—É–º—ë—Ä—Ç–≤—ã–º –Ω–∞ –±–µ—Ä–µ–≥ —ç—Ç–æ–≥–æ –ø—Ä–æ–∫–ª—è—Ç–æ–≥–æ –æ—Å—Ç—Ä–æ–≤–∞,
                –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–∑–≤–∞–ª –æ—Å—Ç—Ä–æ–≤–æ–º –û—Ç—á–∞—è–Ω–∏—è.''',
    },
    {
        'id': 1,
        'location': '–û—Å—Ç—Ä–æ–≤ –æ—Ç—á–∞—è–Ω—å—è',
        'date': '1 –æ–∫—Ç—è–±—Ä—è 1659 –≥–æ–¥–∞',
        'category': 'not-my-day',
        'text': '''–ü—Ä–æ—Å–Ω—É–≤—à–∏—Å—å –ø–æ—É—Ç—Ä—É, —è —É–≤–∏–¥–µ–ª, —á—Ç–æ –Ω–∞—à –∫–æ—Ä–∞–±–ª—å —Å–Ω—è–ª–æ
                —Å –º–µ–ª–∏ –ø—Ä–∏–ª–∏–≤–æ–º –∏ –ø—Ä–∏–≥–Ω–∞–ª–æ –≥–æ—Ä–∞–∑–¥–æ –±–ª–∏–∂–µ –∫ –±–µ—Ä–µ–≥—É.
                –≠—Ç–æ –ø–æ–¥–∞–ª–æ –º–Ω–µ –Ω–∞–¥–µ–∂–¥—É, —á—Ç–æ, –∫–æ–≥–¥–∞ –≤–µ—Ç–µ—Ä —Å—Ç–∏—Ö–Ω–µ—Ç,
                –º–Ω–µ —É–¥–∞—Å—Ç—Å—è –¥–æ–±—Ä–∞—Ç—å—Å—è –¥–æ –∫–æ—Ä–∞–±–ª—è –∏ –∑–∞–ø–∞—Å—Ç–∏—Å—å –µ–¥–æ–π –∏
                –¥—Ä—É–≥–∏–º–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –≤–µ—â–∞–º–∏. –Ø –Ω–µ–º–Ω–æ–≥–æ –ø—Ä–∏–æ–±–æ–¥—Ä–∏–ª—Å—è,
                —Ö–æ—Ç—è –ø–µ—á–∞–ª—å –æ –ø–æ–≥–∏–±—à–∏—Ö —Ç–æ–≤–∞—Ä–∏—â–∞—Ö –Ω–µ –ø–æ–∫–∏–¥–∞–ª–∞ –º–µ–Ω—è.
                –ú–Ω–µ –≤—Å—ë –¥—É–º–∞–ª–æ—Å—å, —á—Ç–æ, –æ—Å—Ç–∞–Ω—å—Å—è –º—ã –Ω–∞ –∫–æ—Ä–∞–±–ª–µ, –º—ã
                –Ω–µ–ø—Ä–µ–º–µ–Ω–Ω–æ —Å–ø–∞—Å–ª–∏—Å—å –±—ã. –¢–µ–ø–µ—Ä—å –∏–∑ –µ–≥–æ –æ–±–ª–æ–º–∫–æ–≤ –º—ã –º–æ–≥–ª–∏ –±—ã
                –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –±–∞—Ä–∫–∞—Å, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –∏ –≤—ã–±—Ä–∞–ª–∏—Å—å –±—ã –∏–∑ —ç—Ç–æ–≥–æ
                –≥–∏–±–ª–æ–≥–æ –º–µ—Å—Ç–∞.''',
    },
    {
        'id': 2,
        'location': '–û—Å—Ç—Ä–æ–≤ –æ—Ç—á–∞—è–Ω—å—è',
        'date': '25 –æ–∫—Ç—è–±—Ä—è 1659 –≥–æ–¥–∞',
        'category': 'not-my-day',
        'text': '''–í—Å—é –Ω–æ—á—å –∏ –≤–µ—Å—å –¥–µ–Ω—å —à—ë–ª –¥–æ–∂–¥—å –∏ –¥—É–ª —Å–∏–ª—å–Ω—ã–π
                –ø–æ—Ä—ã–≤–∏—Å—Ç—ã–π –≤–µ—Ç–µ—Ä. 25 –æ–∫—Ç—è–±—Ä—è.  –ö–æ—Ä–∞–±–ª—å –∑–∞ –Ω–æ—á—å —Ä–∞–∑–±–∏–ª–æ
                –≤ —â–µ–ø–∫–∏; –Ω–∞ —Ç–æ–º –º–µ—Å—Ç–µ, –≥–¥–µ –æ–Ω —Å—Ç–æ—è–ª, —Ç–æ—Ä—á–∞—Ç –∫–∞–∫–∏–µ-—Ç–æ
                –∂–∞–ª–∫–∏–µ –æ–±–ª–æ–º–∫–∏,  –¥–∞ –∏ —Ç–µ –≤–∏–¥–Ω—ã —Ç–æ–ª—å–∫–æ –≤–æ –≤—Ä–µ–º—è –æ—Ç–ª–∏–≤–∞.
                –í–µ—Å—å —ç—Ç–æ—Ç –¥–µ–Ω—å —è —Ö–ª–æ–ø–æ—Ç–∞–ª  –æ–∫–æ–ª–æ –≤–µ—â–µ–π: —É–∫—Ä—ã–≤–∞–ª –∏
                —É–∫—É—Ç—ã–≤–∞–ª –∏—Ö, —á—Ç–æ–±—ã –Ω–µ –∏—Å–ø–æ—Ä—Ç–∏–ª–∏—Å—å –æ—Ç –¥–æ–∂–¥—è.''',
    },
]

def get_post_or_404(post_id):
    for post in posts:
        if post['id'] == post_id:
            return post
    raise Http404("Post not found")

def index(request):
    return render(request, 'blog/index.html', {'posts': list(reversed(posts))})

def post_detail(request, id):
    post = get_post_or_404(id)
    print("üöÄ ~ post:", post)
    return render(request, 'blog/detail.html', {'post': post})

def category_posts(request, category_slug):
    filtered_posts = [post for post in posts if post['category'] == category_slug]
    return render(request, 'blog/category.html', {'posts': filtered_posts, 'category': category_slug})

